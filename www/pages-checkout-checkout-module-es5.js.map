{"version":3,"sources":["webpack:///src/app/pages/checkout/checkout.page.scss","webpack:///src/app/pages/checkout/checkout.page.ts","webpack:///src/app/pages/checkout/checkout-routing.module.ts","webpack:///src/app/pages/checkout/checkout.module.ts","webpack:///src/app/pages/checkout/checkout.page.html"],"names":["CheckoutPage","_loadingCtrl","_fb","_authService","_productService","_toastCtrl","_cartService","_router","cart","getCart","subscribe","res","dataForm","group","name","required","zip","street","city","country","stripe","Stripe","stripe_key","elements","card","creare","mount","cardElement","nativeElement","addEventListener","error","console","log","cardErrors","message","reduce","i","j","price","amount","selector","template","routes","path","component","CheckoutPageRoutingModule","imports","forChild","exports","CheckoutPageModule","declarations"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCkBFA,YAAY;AAYvB,8BACUC,YADV,EAEUC,GAFV,EAGUC,YAHV,EAIUC,eAJV,EAKUC,UALV,EAMUC,YANV,EAOUC,OAPV,EAOyB;AAAA;;AANf,eAAAN,YAAA,GAAAA,YAAA;AACA,eAAAC,GAAA,GAAAA,GAAA;AACA,eAAAC,YAAA,GAAAA,YAAA;AACA,eAAAC,eAAA,GAAAA,eAAA;AACA,eAAAC,UAAA,GAAAA,UAAA;AACA,eAAAC,YAAA,GAAAA,YAAA;AACA,eAAAC,OAAA,GAAAA,OAAA;AAhBV,eAAAC,IAAA,GAAO,EAAP;AAiBI;;AApBmB;AAAA;AAAA,iBAsBvB,oBAAW;AAAA;;AACT,iBAAKF,YAAL,CAAkBG,OAAlB,GAA4BC,SAA5B,CAAsC,UAAAC,GAAG,EAAI;AAC3C,mBAAI,CAACH,IAAL,GAAYG,GAAZ;AACD,aAFD;;AAIA,iBAAKC,QAAL,GAAgB,KAAKV,GAAL,CAASW,KAAT,CAAe;AAC7BC,kBAAI,EAAE,CAAC,kBAAD,EAAqB,0DAAWC,QAAhC,CADuB;AAE7BC,iBAAG,EAAE,CAAC,OAAD,EAAU,0DAAWD,QAArB,CAFwB;AAG7BE,oBAAM,EAAE,CAAC,gBAAD,EAAmB,0DAAWF,QAA9B,CAHqB;AAI7BG,kBAAI,EAAE,CAAC,QAAD,EAAW,0DAAWH,QAAtB,CAJuB;AAK7BI,qBAAO,EAAE,CAAC,IAAD,EAAO,0DAAWJ,QAAlB;AALoB,aAAf,CAAhB,CALS,CAaT;;AACA,iBAAKK,MAAL,GAAcC,MAAM,CAAC,0EAAYC,UAAb,CAApB;AACA,gBAAMC,QAAQ,GAAG,KAAKH,MAAL,CAAYG,QAAZ,EAAjB,CAfS,CAiBT;;AACA,iBAAKC,IAAL,GAAYD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAZ;AACA,iBAAKD,IAAL,CAAUE,KAAV,CAAgB,KAAKC,WAAL,CAAiBC,aAAjC;AAEA,iBAAKJ,IAAL,CAAUK,gBAAV,CAA2B,QAA3B,EAAqC,gBAAa;AAAA,kBAAXC,KAAW,QAAXA,KAAW;AAChDC,qBAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,KAAtB;AACA,mBAAI,CAACG,UAAL,GAAkBH,KAAK,GAAGA,KAAK,CAACI,OAAhC;AACD,aAHD;AAKD;AAhDsB;AAAA;AAAA,iBAkDvB,oBAAW;AACT,mBAAO,KAAK1B,IAAL,CAAU2B,MAAV,CAAiB,UAACC,CAAD,EAAIC,CAAJ;AAAA,qBAAUD,CAAC,GAAGC,CAAC,CAACC,KAAF,GAAUD,CAAC,CAACE,MAA1B;AAAA,aAAjB,EAAmD,CAAnD,CAAP;AACD;AApDsB;AAAA;AAAA,iBAsDjB,kBAAS;;;;;;;;;;;;AAEd;AAxDsB;;AAAA;AAAA,S;;;;gBAdhB;;gBAFW;;gBAGX;;gBAEA;;gBAHmB;;gBAEnB;;gBAHA;;;;;;gBAyBN,uD;AAAS,iBAAC,aAAD,EAAgB;AAAC,sBAAQ;AAAT,WAAhB;;;AAVCvC,kBAAY,6DALxB,gEAAU;AACTwC,gBAAQ,EAAE,cADD;AAETC,gBAAQ,EAAR,sEAFS;;AAAA,OAAV,CAKwB,GAAZzC,YAAY,CAAZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbb,UAAM0C,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,yBAAyB;AAAA;AAAA,O;;AAAzBA,+BAAyB,6DAJrC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIqC,GAAzBH,yBAAyB,CAAzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCMAI,kBAAkB;AAAA;AAAA,O;;AAAlBA,wBAAkB,6DAV9B,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,kFAJO,EAKP,kEALO,CADD;AAQRI,oBAAY,EAAE,CAAC,2DAAD;AARN,OAAT,CAU8B,GAAlBD,kBAAkB,CAAlB;;;;;;;;;;;;;;;;ACtBb;AAAe;;;AAAA","file":"pages-checkout-checkout-module-es5.js","sourcesContent":["export default \".StripeElement {\\n  padding: 20px 20px;\\n}\\n\\n.StripeElement--webkit-autofill {\\n  background-color: #fefde5 !important;\\n}\\n\\n#card-errors {\\n  text-align: center;\\n  color: var(--ion-color-danger);\\n  margin: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NoZWNrb3V0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxvQ0FBQTtBQUNGOztBQUVBO0VBQ0Usa0JBQUE7RUFDQSw4QkFBQTtFQUNBLFlBQUE7QUFDRiIsImZpbGUiOiJjaGVja291dC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuU3RyaXBlRWxlbWVudCB7XG4gIHBhZGRpbmc6IDIwcHggMjBweDtcbn1cbiBcbi5TdHJpcGVFbGVtZW50LS13ZWJraXQtYXV0b2ZpbGwge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmVmZGU1ICFpbXBvcnRhbnQ7XG59XG4gXG4jY2FyZC1lcnJvcnMge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbiAgbWFyZ2luOiAxMHB4O1xufSJdfQ== */\";","import { taggedTemplate } from '@angular/compiler/src/output/output_ast';\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { LoadingController, ToastController } from '@ionic/angular';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { CartService } from 'src/app/services/cart.service';\nimport { ProductService } from 'src/app/services/product.service';\nimport { environment } from 'src/environments/environment';\n\n//Variable for using STRIPE (payments)\ndeclare var Stripe;\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.page.html',\n  styleUrls: ['./checkout.page.scss'],\n})\nexport class CheckoutPage implements OnInit {\n\n  dataForm: FormGroup;\n  cart = [];\n  \n  //Variables for using STRIPE (payments method)\n  stripe;\n  card;\n  cardErrors;\n\n  @ViewChild('cardElement', {static: true}) cardElement: ElementRef;\n\n  constructor(\n    private _loadingCtrl: LoadingController,\n    private _fb: FormBuilder,\n    private _authService: AuthService,\n    private _productService: ProductService,\n    private _toastCtrl: ToastController,\n    private _cartService: CartService,\n    private _router: Router\n  ) {}\n \n  ngOnInit() {\n    this._cartService.getCart().subscribe(res => {\n      this.cart = res;\n    });\n \n    this.dataForm = this._fb.group({\n      name: ['Daniel Domínguez', Validators.required],\n      zip: ['17004', Validators.required],\n      street: ['Avenida Girona', Validators.required],\n      city: ['Girona', Validators.required],\n      country: ['ES', Validators.required]\n    });\n\n    //Stripe Settings, passing the stripe_key which is allocated in the environment file.\n    this.stripe = Stripe(environment.stripe_key);\n    const elements = this.stripe.elements();\n\n    //Card element ehich captures the input\n    this.card = elements.creare('card');\n    this.card.mount(this.cardElement.nativeElement);\n\n    this.card.addEventListener('change', ({error}) => {\n      console.log('error:', error);\n      this.cardErrors = error & error.message;\n    });\n \n  }\n \n  getTotal() {\n    return this.cart.reduce((i, j) => i + j.price * j.amount, 0);\n  }\n \n  async buyNow() {\n   \n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CheckoutPage } from './checkout.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CheckoutPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CheckoutPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CheckoutPageRoutingModule } from './checkout-routing.module';\n\nimport { CheckoutPage } from './checkout.page';\n\nimport { ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CheckoutPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [CheckoutPage]\n})\nexport class CheckoutPageModule {}\n","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"buyer\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Checkout</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n \\n<ion-content>\\n \\n  <form [formGroup]=\\\"dataForm\\\" (submit)=\\\"buyNow()\\\">\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Name</ion-label>\\n      <ion-input formControlName=\\\"name\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Street</ion-label>\\n      <ion-input formControlName=\\\"street\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">City</ion-label>\\n      <ion-input formControlName=\\\"city\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">ZIP</ion-label>\\n      <ion-input formControlName=\\\"zip\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Country</ion-label>\\n      <ion-input formControlName=\\\"country\\\"></ion-input>\\n    </ion-item>\\n \\n    <div #cardElement></div>\\n \\n    <div id=\\\"card-errors\\\" role=\\\"alert\\\">\\n      {{ cardErrors}}\\n    </div>\\n \\n    <ion-button expand=\\\"full\\\" type=\\\"submit\\\" [disabled]=\\\"!dataForm.valid\\\">Buy now for €{{ getTotal() }}</ion-button>\\n  </form>\\n \\n</ion-content>\";"]}